# Complete Navigation Flow

## Four Levels of Investigation

```
LEVEL 1: Conversation List                   LEVEL 2: Single Conversation Detail
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š All Conversations (/)    â”‚             â”‚  ğŸ” Conversation 691         â”‚
â”‚                              â”‚             â”‚                              â”‚
â”‚  [Search: _________]         â”‚             â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  Filter: [Typeâ–¼] [Sourceâ–¼]  â”‚   Click     â”‚  â”‚ 57     â”‚ â”‚ 0.554  â”‚      â”‚
â”‚                              â”‚   Row       â”‚  â”‚ Turns  â”‚ â”‚ Gini   â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â” â”‚  â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”‚ â˜  â”‚ ID   â”‚ Type â”‚ ...  â”‚ â”‚             â”‚                              â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ â”‚             â”‚  [Turn Sequence Chart]       â”‚
â”‚  â”‚ â˜  â”‚ 691  â”‚ Fora â”‚ ...  â”‚â”€â”¤             â”‚  [Speaker Distribution]      â”‚
â”‚  â”‚ â˜  â”‚ 1726 â”‚ Maineâ”‚ ...  â”‚ â”‚             â”‚  [Metrics Breakdown]         â”‚
â”‚  â”‚ â˜  â”‚ 2138 â”‚ Maineâ”‚ ...  â”‚ â”‚             â”‚  [UMAP Position]             â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜ â”‚             â”‚                              â”‚
â”‚                              â”‚             â”‚  ğŸ“ Transcript               â”‚
â”‚  [Compare Selected (3)]      â”‚             â”‚  Turn 1: "Recording started" â”‚
â”‚                              â”‚             â”‚  Turn 12: "Can we discuss..." â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  - 8 responses ğŸ”¥            â”‚
         â”‚                                   â”‚                              â”‚
         â”‚ Select multiple                  â”‚  [ğŸ”¬ Analyze Turns]          â”‚
         â”‚ conversations                    â”‚  [â• Add to Compare]         â”‚
         â†“                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚           â”‚
                                                     â”‚ Analyze   â”‚ Compare
                                                     â”‚           â†“
                                                     â”‚
LEVEL 3: Turn Analysis                              â”‚    LEVEL 4: Comparison
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”¬ Turns in Conv 691        â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  âš–ï¸ Compare View     â”‚
â”‚                              â”‚                         â”‚                      â”‚
â”‚  [Search turns: ______]      â”‚                         â”‚  Comparing:          â”‚
â”‚  Min responses: [3+â–¼]        â”‚                         â”‚  691 vs 1726 vs 2138â”‚
â”‚  Sort by: [Response Countâ–¼]  â”‚                         â”‚                      â”‚
â”‚                              â”‚                         â”‚  Metrics Table:      â”‚
â”‚  ğŸ•¸ï¸ Response Network         â”‚                         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”â”‚
â”‚  [Interactive graph showing  â”‚                         â”‚  â”‚Metricâ”‚691â”‚...â”‚...â”‚â”‚
â”‚   which turns respond to     â”‚                         â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤â”‚
â”‚   which other turns]         â”‚                         â”‚  â”‚Turns â”‚ 57â”‚ 64â”‚214â”‚â”‚
â”‚                              â”‚                         â”‚  â”‚Gini  â”‚.55â”‚.17â”‚.46â”‚â”‚
â”‚  Turns Table:                â”‚                         â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”â”‚                         â”‚                      â”‚
â”‚  â”‚ â˜ â”‚ # â”‚Speaker â”‚Respâ”‚...â”‚â”‚                         â”‚  [Overlaid Charts]   â”‚
â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¤â”‚                         â”‚  [Statistical Tests] â”‚
â”‚  â”‚ â˜ â”‚ 12â”‚ Alice  â”‚ 8  â”‚...â”‚â”‚                         â”‚                      â”‚
â”‚  â”‚ â˜ â”‚ 45â”‚ Bob    â”‚ 5  â”‚...â”‚â”‚                         â”‚  OR                  â”‚
â”‚  â”‚ â˜ â”‚ 78â”‚ Carol  â”‚ 3  â”‚...â”‚â”‚                         â”‚                      â”‚
â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”˜â”‚                         â”‚  Group Comparison:   â”‚
â”‚                              â”‚                         â”‚  Fora vs Analogia    â”‚
â”‚  Turn 12 Details:            â”‚                         â”‚  (65 vs 36 convs)    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                         â”‚                      â”‚
â”‚  â”‚ "Can we discuss..."      â”‚â”‚                         â”‚  [Box Plots]         â”‚
â”‚  â”‚                          â”‚â”‚                         â”‚  [Distributions]     â”‚
â”‚  â”‚ 8 responses received:    â”‚â”‚                         â”‚  [T-tests]           â”‚
â”‚  â”‚ â€¢ Turn 13 (Bob)          â”‚â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ â€¢ Turn 15 (Carol)        â”‚â”‚
â”‚  â”‚ â€¢ Turn 18 (David)        â”‚â”‚
â”‚  â”‚ ...                      â”‚â”‚
â”‚  â”‚ [Response Timeline]      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                              â”‚
â”‚  [Compare Selected Turns]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## URL Structure

```
Level 1: /
         - Home page with conversation table

Level 2: /conversation/:id
         - Example: /conversation/691
         - Single conversation detail

Level 3: /turns/:conversationId
         - Example: /turns/691
         - Turn-level analysis for conversation 691
         - Optional: /turns/:conversationId/:turnId
           to highlight specific turn

Level 4: /compare
         - Individual: /compare?ids=691,1726,2138
         - Groups: /compare?groups=Fora+Corpus,Analogia
         - Clusters: /compare?clusters=0,1,2
         - Turns: /compare?turns=691_12,691_45,1726_23
```

## User Journeys

### Journey 1: Exploring a Conversation
```
1. Land on homepage (/)
2. Filter by Type: "Fora Corpus"
3. Click conversation 691
4. View metrics and visualizations
5. Notice turn 12 has 8 responses
6. Click "Analyze Turns"
7. See turn 12 is highlighted
8. Explore response network
9. Select other high-response turns
10. Click "Compare Selected Turns"
```

### Journey 2: Comparing Groups
```
1. Land on homepage (/)
2. Select all "Fora Corpus" conversations (checkbox)
3. Select all "Analogia" conversations
4. Click "Compare Selected"
5. Choose "Compare as Groups"
6. See aggregate metrics and distributions
7. Notice Fora has higher entropy
8. Drill into specific conversation
9. Investigate why
```

### Journey 3: Finding High-Impact Turns
```
1. View conversation 691 detail
2. Click "Analyze Turns"
3. Sort by: "Response Count" (descending)
4. Filter: "Min responses: 5+"
5. See top 10 high-response turns
6. Click turn 12 details
7. See full response chain
8. Add to comparison
9. Repeat for other conversations
10. Compare turn patterns across conversations
```

## Key Features by Level

### Level 1: List (Current)
âœ… Table with metrics
âœ… Filter by type, source
âœ… Sort all columns
ğŸ”„ Add: Search
ğŸ”„ Add: Checkboxes for selection
ğŸ”„ Add: Mini sparklines

### Level 2: Detail (To Build)
- Overview metrics cards
- Turn sequence visualization
- Speaker distribution
- Transcript with turn numbers
- UMAP position
- Related conversations
- "Analyze Turns" button
- "Add to Compare" button

### Level 3: Turn Analysis (To Build)
- Response network graph
- Filterable turn table
- Sort by response metrics
- Turn detail panel
- Response chain visualization
- Turn selection for comparison

### Level 4: Compare (To Build)
- Side-by-side metrics
- Overlaid visualizations
- Group aggregation
- Statistical tests
- Turn-level comparison
- Export capabilities

## Data Calculations Needed

### Turn Metrics (calculate from JSON)
```javascript
For each turn in conversation:
  - Count direct responses (link_turn_id points to this turn)
  - Count total response chain depth
  - Identify substantive vs mechanical responses
  - Calculate response latency (time between turns)
  - List all speakers who responded
  - Build response tree structure
```

### Aggregations (for groups)
```javascript
For group of conversations:
  - Mean, median, std dev of all metrics
  - Distribution plots
  - Outlier detection
  - Correlation between metrics
```

## Technical Stack

- **Routing**: React Router v6
- **State**: React Context + hooks
- **Charts**: Recharts (simple) + D3.js (custom)
- **Network graphs**: React Flow or vis-network
- **Data processing**: Custom hooks + utility functions

